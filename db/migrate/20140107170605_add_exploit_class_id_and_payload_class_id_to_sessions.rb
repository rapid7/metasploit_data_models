# Add references :exploit_class and :payload_class to sessions, which reference module_classes.
class AddExploitClassIdAndPayloadClassIdToSessions < ActiveRecord::Migration
  #
  # CONSTANTS
  #

  TABLE_NAME = :sessions

  #
  # Methods
  #

  # Add exploit_class_id and payload_class_id to sessions with indexes.
  #
  # @return [void]
  def change
    change_table TABLE_NAME do |t|
      t.references :exploit_class, null: true
      t.references :payload_class, null: true

      t.index :exploit_class_id
      t.index :payload_class_id
    end
  end
end
